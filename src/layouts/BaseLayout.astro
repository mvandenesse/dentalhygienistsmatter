---
const { title = 'Dental Hygienists Matter', description = 'Protecting standards of care in dental hygiene. Evidence-based information on Virginia workforce legislation affecting preventive dental care.' } = Astro.props;

const nav = [
  { href: '/', label: 'Home' },
  { href: '/the-bills', label: 'The Bills' },
  { href: '/patient-safety', label: 'Patient Safety' },
  { href: '/better-solutions', label: 'Better Solutions' },
  { href: '/take-action', label: 'Take Action' },
  { href: '/posts', label: 'Posts' },
  { href: '/transparency', label: 'Transparency' },
  { href: '/sources', label: 'Sources' },
  { href: '/about', label: 'About' },
];

const currentPath = Astro.url?.pathname ?? '/';
const normalize = (p) => (p.length > 1 ? p.replace(/\/$/, '') : p);
const isActive = (href) => normalize(currentPath) === normalize(href);
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" href="/favicon-32.png" type="image/png" sizes="32x32" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <meta name="robots" content="index,follow" />
  </head>
  <body>
    <a class="skip" href="#content">Skip to content</a>

    <header class="site-header">
      <div class="wrap">
        <div class="brand">
          <a href="/" class="brand__link">Dental Hygienists Matter</a>
          <div class="brand__tag">Standards of care • Patient safety • Transparency</div>
        </div>
        <nav class="nav" aria-label="Primary">
          <details class="nav__mobile">
            <summary class="nav__summary">Menu</summary>
            <ul class="nav__list nav__list--mobile">
              {nav.map((item) => (
                <li>
                  <a
                    href={item.href}
                    class={isActive(item.href) ? 'nav__link nav__link--active' : 'nav__link'}
                    aria-current={isActive(item.href) ? 'page' : undefined}
                  >
                    {item.label}
                  </a>
                </li>
              ))}
            </ul>
          </details>

          <ul class="nav__list nav__list--desktop">
            {nav.map((item) => (
              <li>
                <a
                  href={item.href}
                  class={isActive(item.href) ? 'nav__link nav__link--active' : 'nav__link'}
                  aria-current={isActive(item.href) ? 'page' : undefined}
                >
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      </div>
    </header>

    <main id="content" class="wrap">
      <slot />
    </main>

    <footer class="footer">
      <div class="wrap">
        <p><strong>Disclaimer:</strong> This site is for informational/advocacy purposes and is not medical or legal advice.</p>
        <p class="muted">Last updated: {new Date().toISOString().slice(0, 10)}</p>
      </div>
    </footer>

    <style>
      :root {
        --bg: #2b0a5a;
        --panel: rgba(255,255,255,0.06);
        --text: #eef2ff;
        --muted: rgba(238,242,255,0.75);
        --link: #a5b4fc;
        --link2: #93c5fd;
        --border: rgba(255,255,255,0.14);
        --accent: #22c55e;
        --danger: #fb7185;
        --shadow: 0 10px 40px rgba(0,0,0,0.45);
        color-scheme: dark;
      }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: radial-gradient(1200px 800px at 10% 0%, rgba(99,102,241,0.25), transparent 55%),
                    radial-gradient(1000px 700px at 90% 20%, rgba(34,197,94,0.15), transparent 55%),
                    var(--bg);
        color: var(--text);
      }
      a { color: var(--link); text-decoration: none; }
      a:hover { text-decoration: underline; }
      .wrap { max-width: 1000px; margin: 0 auto; padding: 24px; }
      .site-header {
        position: sticky; top: 0; z-index: 10;
        backdrop-filter: blur(10px);
        background: rgba(11,16,32,0.78);
        border-bottom: 1px solid var(--border);
      }
      .site-header .wrap { display: flex; gap: 18px; align-items: center; justify-content: space-between; }
      .brand__link { font-weight: 800; letter-spacing: 0.2px; color: var(--text); }
      .brand__tag { font-size: 12px; color: var(--muted); margin-top: 2px; }

      .nav__list { list-style: none; margin: 0; padding: 0; display: flex; flex-wrap: wrap; gap: 10px; justify-content: flex-end; }
      .nav__link { display: inline-block; padding: 8px 10px; border-radius: 10px; border: 1px solid transparent; }
      .nav__link:hover { border-color: var(--border); text-decoration: none; background: rgba(255,255,255,0.04); }
      .nav__link--active {
        border-color: rgba(165,180,252,0.85);
        background: rgba(165,180,252,0.12);
        text-decoration: none;
      }

      .nav__mobile { display: none; }
      .nav__summary {
        cursor: pointer;
        list-style: none;
        user-select: none;
        padding: 8px 10px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: rgba(255,255,255,0.04);
        font-weight: 650;
      }
      .nav__summary::-webkit-details-marker { display: none; }
      .nav__list--mobile {
        margin-top: 10px;
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
        padding: 10px;
        border-radius: 14px;
        background: rgba(0,0,0,0.25);
        border: 1px solid var(--border);
      }
      .nav__list--mobile a { display: block; }
      h1 { font-size: clamp(30px, 4vw, 44px); line-height: 1.1; margin: 18px 0 10px; }
      h2 { margin-top: 36px; }
      p { line-height: 1.6; }
      .muted { color: var(--muted); }
      .panel {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 14px;
      }
      .col-7 { grid-column: span 7; }
      .col-5 { grid-column: span 5; }
      .col-12 { grid-column: span 12; }
      @media (max-width: 860px) {
        .col-7, .col-5 { grid-column: span 12; }
        .site-header .wrap { flex-direction: column; align-items: stretch; }
        .brand { width: 100%; }
        .nav__list--desktop { display: none; }
        .nav__mobile { display: block; width: 100%; }
        .nav { width: 100%; }
      }

      @media (max-width: 520px) {
        .wrap { padding: 16px; }
        .btn { width: 100%; }
      }
      .btns { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 14px; }
      .btn {
        display: inline-flex; align-items: center; justify-content: center;
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(255,255,255,0.04);
        color: var(--text);
        font-weight: 650;
        text-decoration: none;
      }
      .btn:hover { background: rgba(255,255,255,0.08); text-decoration: none; }
      .btn--primary { border-color: rgba(34,197,94,0.6); background: rgba(34,197,94,0.15); }
      .btn--danger { border-color: rgba(251,113,133,0.6); background: rgba(251,113,133,0.15); }
      .callout { border-left: 4px solid var(--accent); padding-left: 14px; }
      .callout--danger { border-left-color: var(--danger); }
      .skip {
        position: absolute; left: -9999px; top: 10px;
        background: #111827; color: white; padding: 10px 12px;
        border-radius: 10px; border: 1px solid var(--border);
      }
      .skip:focus { left: 10px; }
      .footer { border-top: 1px solid var(--border); margin-top: 40px; }
      .footer .wrap { font-size: 14px; }
      code { background: rgba(255,255,255,0.06); padding: 2px 6px; border-radius: 8px; border: 1px solid var(--border); }
      ul { line-height: 1.6; }
    </style>
  </body>
</html>
